record(ao, "$(SYS)_SHOT_NUMBER") {
  field(DESC, "shot number")
}

record(ao, "$(SYS)_OP_MODE") {
  field(DESC, "operation number")
}

record(ao, "$(SYS)_START") {
  field(DESC, "start")
}

record(calcout, "$(SYS)_SHOT_NUMBER_CALC") {
  field(DESC, "Calcuration for shot number")
  field(SCAN, "Passive")
  field(CALC, "(A=1)?B:C")
  field(INPA, "$(SYS)_OP_MODE CPP")
  field(INPB, "CCS_SHOT_NUMBER CPP")
  field(INPC, "EC1_DAQ_RD_LOCALSHOT CPP")
  field(OUT, "$(SYS)_SHOT_NUMBER PP")
  field(PINI, "1")
}

record(calcout, "$(SYS)_OP_MODE_CALC") {
  field(DESC, "Calcuration for operation mode")
  field(SCAN, "Passive")
  field(CALC, "(A=1)? 1 : ((B=1)? 2 : 0)")
  field(INPA, "EC1_PSPLC_STAT_KSTAR CPP")
  field(INPB, "EC1_PSPLC_STAT_DUMMY CPP")
  field(OUT, "$(SYS)_OP_MODE")
  field(FLNK, "$(SYS)_OP_MODE")
  field(PINI, "1")
}

record(calcout, "$(SYS)_START_CALC") {
  field(DESC, "Calcuration for operation mode")
  field(SCAN, "Passive")
  field(CALC, "A")
  field(INPA, "EC1_DAQ_CMD_START CPP")
  field(OUT, "$(SYS)_START")
  field(FLNK, "$(SYS)_START")
  field(PINI, "1")
}

