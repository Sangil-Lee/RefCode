#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND


# 2007. 12. 17  add bo record.....
# 2007. 12. 24  remove bo record
# + PV: DDS1_getState   add field(PINI, "YES")
# 2009. 09. 16  setOpMode to OP_MODE
# 2010. 5. 26  add ai sw record to get from CCS blip time
# 2010. 6. 4   add error information string pv
record(ao, "$(SYS)_OP_MODE") {
  field(DESC, "ao 1:local, 2:remote, 3:cal, 0:none")
  field(DTYP, "Admin AO")
  field(OUT, "@set_mode")
}

record(ao, "$(SYS)_CREATE_LOCAL_SHOT") {
  field(DESC, "Analog output")
  field(DTYP, "Admin AO")
  field(OUT, "@create_shot")
  field(VAL, "1")
}

record(bi, "$(SYS)_HEARTBEAT") {
  field(DESC, "Binary input")
  field(INP, "$(SYS)_calcHeartBeat NPP NMS")
  field(ZNAM, "0")
  field(ONAM, "1")
}

record(calc, "$(SYS)_calcHeartBeat") {
  field(SCAN, "1 second")
  field(FLNK, "$(SYS)_HEARTBEAT NPP NMS")
  field(CALC, "A=0?1:0")
  field(INPA, "$(SYS)_HEARTBEAT")
  field(DESC, "soft calc")
}

record(bo, "$(SYS)_BO_AUTO_SAVE") {
  field(DESC, "bo, auto data put after shot")
  field(SCAN, "Passive")
  field(DTYP, "Admin BO")
  field(OUT, "@auto_save")
  field(VAL, "1")
  field(ZNAM, "NO")
  field(ONAM, "YES")
}

record(bo, "$(SYS)_SEND_DATA") {
  field(DESC, "bo, send data to mdsplus")
  field(DTYP, "Admin BO")
  field(OUT, "@snd_data")
  field(ZNAM, "ZERO")
  field(ONAM, "ONE")
}

record(mbbi, "$(SYS)_STATUS") {
  field(DESC, "mbbi, system master status")
  field(SCAN, "I/O Intr")
  field(DTYP, "Admin MBBI")
  field(INP, "@status")
  field(NOBT, "6")
  field(ZRST, "Nothing")
  field(ONST, "Ready to run")
  field(TWST, "Arming")
  field(THST, "Running")
  field(FRST, "Post-processing")
  field(FVST, "Data tranfer")
  field(SXST, "Idle")
  field(SVST, "Oops")
}

record(mbbi, "$(SYS)_SYS_ERROR") {
  field(DESC, "mbbi, system error show")
  field(DTYP, "Admin MBBI")
  field(INP, "@error")
}

record(bo, "$(SYS)_RESET") {
  field(DESC, "bo, sys stop or EMERGY")
  field(DTYP, "Admin BO")
  field(OUT, "@sys_reset")
  field(ZNAM, "0")
  field(ONAM, "1")
}

record(ao, "$(SYS)_SAMPLING_RATE") {
  field(DESC, "ao, admin sample rate")
  field(DTYP, "Admin AO")
  field(OUT, "@sample_rate")
}

record(bo, "$(SYS)_BOARD_SETUP") {
  field(DESC, "bo, final board register setting")
  field(DTYP, "Admin BO")
  field(OUT, "@hw_setup")
  field(ZNAM, "0")
  field(ONAM, "1")
}

record(ao, "$(SYS)_START_T0_SEC1") {
  field(DESC, "ao, T0 start time of Sec1")
  field(DTYP, "Admin AO")
  field(OUT, "@start_t0 0")
}

record(ao, "$(SYS)_STOP_T1_SEC1") {
  field(DESC, "ao, T1 end time of Sec1")
  field(DTYP, "Admin AO")
  field(OUT, "@stop_t1 0")
}

record(ao, "$(SYS)_START_T0_SEC2") {
  field(DESC, "ao, T0 start time of Sec2")
  field(DTYP, "Admin AO")
  field(OUT, "@start_t0 1")
}

record(ao, "$(SYS)_STOP_T1_SEC2") {
  field(DESC, "ao, T1 end time of Sec2")
  field(DTYP, "Admin AO")
  field(OUT, "@stop_t1 1")
}

record(ao, "$(SYS)_START_T0_SEC3") {
  field(DESC, "ao, T0 start time of Sec3")
  field(DTYP, "Admin AO")
  field(OUT, "@start_t0 2")
}

record(ao, "$(SYS)_STOP_T1_SEC3") {
  field(DESC, "ao, T1 end time of Sec3")
  field(DTYP, "Admin AO")
  field(OUT, "@stop_t1 2")
}

record(stringin, "$(SYS)_ERROR_STRING") {
  field(DESC, "stringout, error information")
  field(DTYP, "Admin Stringin")
  field(INP, "@error_str")
  field(SCAN, "I/O Intr")
}

record(bo, "$(SYS)_SYS_ARMING") {
  field(DESC, "bo, arming to run")
  field(SCAN, "Passive")
  field(DTYP, "Admin BO")
  field(OUT, "@arm_enable")
  field(ZNAM, "0")
  field(ONAM, "1")
}

record(bo, "$(SYS)_SYS_RUN") {
  field(DESC, "bo, system run")
  field(DTYP, "Admin BO")
  field(VAL, "0")
  field(OUT, "@sys_run")
  field(ZNAM, "0")
  field(ONAM, "1")
}

record(ai, "$(SYS)_CCS_BLIP_TIME") {
  field(DESC, "copy form ccs")
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(INP, "CCS_BLIP_TIME CPP")
}

record(longin, "$(SYS)_CCS_SHOT_NUMBER") {
  field(DESC, "copy from ccs")
  field(DTYP, "Soft Channel")
  field(INP, "CCS_SHOT_NUMBER CPP")
  field(PINI, "YES")
}


record(ao, "$(SYS)_SHOT_NUMBER") {
  field(DESC, "ao, local shot number")
  field(DTYP, "Admin AO")
  field(OUT, "@shot_num")
  field(PINI, "YES")
  field(VAL, "1")
}

record(ao, "$(SYS)_BLIP_TIME") {
  field(DESC, "ao, local blip time")
  field(DTYP, "Admin AO")
  field(VAL, "11")
  field(OUT, "@set_blip")
}

#! Further lines contain data used by VisualDCT
#! View(0,230,1.0)
#! Record("$(SYS)_OP_MODE",20,22,0,0,"$(SYS)_OP_MODE")
#! Record("$(SYS)_CREATE_LOCAL_SHOT",200,288,0,0,"$(SYS)_CREATE_LOCAL_SHOT")
#! Record("$(SYS)_HEARTBEAT",640,28,0,0,"$(SYS)_HEARTBEAT")
#! Field("$(SYS)_HEARTBEAT.INP",16777215,0,"$(SYS)_HEARTBEAT.INP")
#! Link("$(SYS)_HEARTBEAT.INP","$(SYS)_calcHeartBeat.VAL")
#! Field("$(SYS)_HEARTBEAT.VAL",16777215,0,"$(SYS)_HEARTBEAT.VAL")
#! Record("$(SYS)_calcHeartBeat",640,214,0,0,"$(SYS)_calcHeartBeat")
#! Field("$(SYS)_calcHeartBeat.FLNK",16777215,0,"$(SYS)_calcHeartBeat.FLNK")
#! Link("$(SYS)_calcHeartBeat.FLNK","$(SYS)_HEARTBEAT")
#! Field("$(SYS)_calcHeartBeat.INPA",16777215,0,"$(SYS)_calcHeartBeat.INPA")
#! Link("$(SYS)_calcHeartBeat.INPA","$(SYS)_HEARTBEAT.VAL")
#! Field("$(SYS)_calcHeartBeat.VAL",16777215,0,"$(SYS)_calcHeartBeat.VAL")
#! Record("$(SYS)_BO_AUTO_SAVE",20,446,0,1,"$(SYS)_BO_AUTO_SAVE")
#! Record("$(SYS)_SEND_DATA",1000,254,0,1,"$(SYS)_SEND_DATA")
#! Record("$(SYS)_STATUS",400,23,0,1,"$(SYS)_STATUS")
#! Record("$(SYS)_SYS_ERROR",20,22,0,0,"$(SYS)_SYS_ERROR")
#! Record("$(SYS)_RESET",20,294,0,1,"$(SYS)_RESET")
#! Record("$(SYS)_SAMPLING_RATE",820,22,0,1,"$(SYS)_SAMPLING_RATE")
#! Record("$(SYS)_BOARD_SETUP",840,614,0,1,"$(SYS)_BOARD_SETUP")
#! Record("$(SYS)_START_T0_SEC1",820,142,0,1,"$(SYS)_START_T0_SEC1")
#! Record("$(SYS)_STOP_T1_SEC1",820,262,0,1,"$(SYS)_STOP_T1_SEC1")
#! Record("$(SYS)_START_T0_SEC2",1000,22,0,1,"$(SYS)_START_T0_SEC2")
#! Record("$(SYS)_STOP_T1_SEC2",1000,142,0,1,"$(SYS)_STOP_T1_SEC2")
#! Record("$(SYS)_START_T0_SEC3",820,382,0,1,"$(SYS)_START_T0_SEC3")
#! Record("$(SYS)_STOP_T1_SEC3",840,502,0,1,"$(SYS)_STOP_T1_SEC3")
#! Record("$(SYS)_ERROR_STRING",220,448,0,1,"$(SYS)_ERROR_STRING")
#! Record("$(SYS)_SYS_ARMING",200,60,0,0,"$(SYS)_SYS_ARMING")
#! Record("$(SYS)_SYS_RUN",20,140,0,0,"$(SYS)_SYS_RUN")
#! Record("$(SYS)_CCS_BLIP_TIME",200,648,0,1,"$(SYS)_CCS_BLIP_TIME")
#! Field("$(SYS)_CCS_BLIP_TIME.INP",16777215,1,"$(SYS)_CCS_BLIP_TIME.INP")
#! Record("$(SYS)_CCS_SHOT_NUMBER",20,648,0,1,"$(SYS)_CCS_SHOT_NUMBER")
#! Field("$(SYS)_CCS_SHOT_NUMBER.INP",16777215,1,"$(SYS)_CCS_SHOT_NUMBER.INP")
#! Record("$(SYS)_SHOT_NUMBER",420,434,0,1,"$(SYS)_SHOT_NUMBER")
#! Record("$(SYS)_BLIP_TIME",420,588,0,1,"$(SYS)_BLIP_TIME")
